<script type="text/javascript">
$('.test.checkbox').checkbox();
</script>
<style type="text/css">
.modal-backdrop{
  z-index: -1 !important;
}
.teste:hover{
  cursor:pointer;
}
</style>
        
        <form name="clienteForm" class="ui form" prependId="false">
          <div class="row">
            <div class="col-lg-4 col-sm-8">
              <div class="card teste" data-backdrop="true" data-toggle="modal" data-target="#myModal">
                <div class="content">
                  <div class="row">
                      <div class="col-xs-3">
                          <div class="numbers">
                              <p>Un</p>
                              <span style="font-size: 20px;">{{vm.itemEstoque.qtdEstoque}}</span>
                          </div>
                      </div>
                      <div style="border-left: thin solid #F1EAE0;" class="col-xs-6">
                          <div class="numbers">
                              <p>R$</p>
                               <span style="font-size: 20px;">{{vm.itemEstoque.custoTotalEstoque}}</span>
                          </div>
                      </div>
                      <div style="border-left: thin solid #F1EAE0;" class="col-xs-3">
                          <div class="numbers">
                              <p>R$/un</p>
                               <span style="font-size: 20px;">{{vm.itemEstoque.custoUnitario}}</span>
                          </div>
                      </div>
                  </div>
                  <div class="footer">
                      <hr />
                      <div class="stats">
                          <i class="ti-plus"></i> Quantidade em estoque
                      </div>
                  </div>
                </div>
              </div>
            </div>
          </div> 


          <div class="row">               
            <div class="col-lg-12 col-md-12">
              <div class="card">
                <div class="header">
                    <h4 class="title">Dados Item de Estoque</h4>
                </div>

                <div class="content">
                  <div class="row">

                      <div class="col-md-6">
                          <div class="form-group">
                              <label for="nome">Nome <span class="obrigatorio" title="Obrigatório">*</span></label>
                              <input type="text" ng-required="true" class="form-control border-input" ng-model="vm.itemEstoque.nome"  name="nome" value="" placeholder="Nome Item" type="text" />
                          </div>
                      </div>
                      <div ng-if="vm.itemEstoque._id" class="col-md-6">
                          <div class="form-group">
                              <label>Codigo</label>
                              <input ng-disabled="true" type="text"  value="" ng-model="vm.itemEstoque._id" placeholder="" class="form-control border-input" type="text"/>
                          </div>
                      </div>

                      <div class="col-md-12">
                          <div class="form-group">
                              <label>Descrição</label>
                              <input type="text"  name="descricao" class="form-control border-input" ng-model="vm.itemEstoque.descricao" value="" placeholder="Descrição" type="text"/>
                          </div>
                      </div>
                      
                      <div class="col-md-6">
                          <div class="form-group">
                              <label>Categoria <span class="obrigatorio" title="Obrigatório">*</span></label>
                              <select ng-required="true" ng-change="vm.atualizaSubCategories()"  ng-model="vm.itemEstoque.categoria._id" class="form-control border-input"
                                      ng-options="cat._id as cat._id for cat in vm.parents">
                                  <option value="">Selecione a categoria</option>
                              </select>
                          </div>
                      </div>

                      <div class="col-md-6">
                          <div class="form-group">
                              <label>Sub Categoria <span class="obrigatorio" title="Obrigatório">*</span></label>
                              <select ng-required="true" ng-change="vm.mostra()" ng-model="vm.itemEstoque.subCategoria._id" class="form-control border-input"
                                ng-options="sub._id as sub._id for sub in vm.subCategorias">
                                  <option value="">Selecione a sub categoria</option>
                              </select>
                          </div>
                      </div>

                      <div class="col-md-2">
                          <div class="form-group">
                              <label>Preço (R$)  <span class="obrigatorio" title="Obrigatório">*</span></label>
                              <input type="text" ng-required="true"  name="descricao" class="form-control border-input" ng-model="vm.itemEstoque.qtdCritica" value="" placeholder="Descrição" type="text"/>
                          </div>
                      </div>

                      <div class="col-md-2">
                          <div class="form-group">
                              <label>Quantidade  <span class="obrigatorio" title="Obrigatório">*</span></label>
                              <input type="text" ng-required="true"  name="descricao" class="form-control border-input" ng-model="vm.itemEstoque.medida.medidaPorUnidade" value="" placeholder="Descrição" type="text"/>
                          </div>
                      </div>

                      <div class="col-md-4">
                          <div class="form-group">
                              <label>Un Medida  <span class="obrigatorio" title="Obrigatório">*</span></label>
                              <select ng-required="true" ng-model="vm.itemEstoque.medida.unidadeMedida._id" class="form-control border-input" ng-options="unidade._id as unidade.unidade for unidade in vm.unidadeMedidas">
                                  <option value="">Selecione a categoria</option>
                              </select>
                          </div>
                      </div>

                      <div class="col-md-2">
                          <div class="form-group">
                              <label>Status</label>
                              <input type="checkbox" style="width: 20%;" name="status" class="form-control border-input" ng-model="vm.itemEstoque.status" ng-value="{{vm.itemEstoque.status}}">
                          </div>
                      </div>

                  </div>
                  

                  <div class="text-center">
                    <input type="button"  style="float:right"
                      ng-click="!vm.itemEstoque._id ? vm.insert() : vm.update()" class="btn btn-fill btn-success" id="btsalvar" value="Salvar" />
  
                    <input type="button" ng-if="vm.itemEstoque._id" ng-click="vm.delete()" class="btn btn-fill btn-danger" value="Inativar" id="  btexcluir" />

                    <a ui-sref="listaEstoque" class="btn btn-fill btn-primary">Voltar</a>
                  </div>
                  <div class="clearfix"></div>
                </div>
              </div>
            </div>
          </div>
      </form>

<!-- Modal -->
<div class="modal fade" id="myModal" style="z-index:2000" tabindex="-1" role="dialog"  aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <form>
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">Entrada de Estoque</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <div class="row">

            <!-- <div class="col-md-4">
              <div class="form-group">
                <label>Quantidade</label>
                <select ng-model="vm.itemEstoque.medida.unidadeMedida" class="form-control border-input" ng-options="pacote._id as pacote.nome for unidade in vm.unidadeMedidas">
                    <option value="">Selecione a categoria</option>
                </select>
              </div>
            </div> -->
            
            <div class="col-md-4">
              <div class="form-group">
                <label>Unidades</label>
                  <input type="number" ng-model="vm.item.quantidade" class="form-control border-input" name="itemEstoque[quantidadeCritica]" placeholder="#" type="text"/>
              </div>
            </div>


            <div class="col-md-4">
              <div class="form-group">
                <label>Preço Unidade</label>
                <input type="number" ng-model="vm.item.precoUnitario" class="form-control border-input" name="itemEstoque[quantidadeCritica]" placeholder="#" type="text"/>
              </div>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancelar</button>
          <button type="button" ng-click="vm.inserirEntrada()" data-dismiss="modal" class="btn btn-primary">Inserir</button>
        </div>
      </form>
    </div>
  </div>
</div>


